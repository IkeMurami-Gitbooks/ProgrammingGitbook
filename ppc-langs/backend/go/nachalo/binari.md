# Компилятор

## Введение: бинари

_gc_ - стандартный компилятор языка Go\
В его состав входят программы компиляции _5g_, _6g_ и _8g_\
программы компановки _51_, _61_ и _81_\
_godoc_ - для просмотра документации\
\
5 - ARM\
6 - AMD64\
8 - Intel 386

К счастью, есть одна высокоуровневая обертка - _go_

В комплект Go входит инструмент cgo, обеспечивающий возможность использования внешнего программного кода на C в программах на языке Go. В Linux и BSD-системах имеется возможность использовать код на C и C++ с помощью инструмента SWIG (www.swig.org). Помимо gc, имеется также компилятор gccgo (интерфейс к компилятора gcc - GNU Compiler Collection -- для языка Go).

## Правка, компиляция и запуск

```
Собрать пакет и положить бинарь рядом:
$ go build [-o /path/to/binary]

про кросс-компиляцию: https://habr.com/ru/post/249449/

пример: win:
GOOS=windows GOARCH=386 go build -o http_example.exe
GOOS=windows GOARCH=amd64 go build -o http_example64.exe

Собрать пакет и положить бинарь в %GOROOT%\bin:
$ go install
```

## Форматирование кода

gofmt - форматирование кода

## Кодогенерация

Есть такая инструкция go generate. Она позволяет сгенерировать какой-то код дод запуска программы (например, запустить sh-скрипт, или сгенерить proto-структуры и классы и тп)

Как встроить это в проект — создать рядом с main.go, файл generate.go:

```go
package main

//go:generate scripts/protobuf.sh
```

На этапе сборки проекта будет запущен скрипт соответствующий (до go build).

## go cmd

Документация по go cli: [https://pkg.go.dev/cmd/go](https://pkg.go.dev/cmd/go)
